(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{34:function(e,t,a){e.exports=a(51)},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(19),o=a.n(c),i=a(15),l=a(16),s=a(8);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TASK":switch(t.tasktype){case"YEAR":return d({},e,Object(s.a)({},Object.keys(e).length,{task:t.text,done:!1,progress:0,type:t.tasktype,date:t.date,year:t.year,month:-1,day:-1,selected:!1,parent:Object.keys(e).length}));case"MONTH":return d({},e,Object(s.a)({},Object.keys(e).length,{task:t.text,done:!1,progress:0,type:t.tasktype,date:t.date,year:t.year,month:t.month,day:-1,selected:!1,parent:t.parentid}));case"DAY":return d({},e,Object(s.a)({},Object.keys(e).length,{task:t.text,done:!1,type:t.tasktype,date:t.date,year:t.year,month:t.month,day:t.day,selected:!1,parent:t.parentid}));default:return d({},e,Object(s.a)({},Object.keys(e).length,{task:t.text,done:!1,type:t.tasktype,date:t.date,year:-2,month:-2,day:-2,selected:!1,parent:-2}))}case"EDIT_TASK":return d({},e,Object(s.a)({},t.id,d({},e[t.id],{task:t.text})));case"TOGGLE_TASK":return d({},e,Object(s.a)({},t.id,d({},e[t.id],{done:!e[t.id].done})));default:return e}}var y=new Date(Date.now());var g=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,c=Object.entries(e.tasks).map((function(e){return d({},e[1],{id:e[0]})}));switch(t){case"YEAR":return c.filter((function(e){return e.type===t&&e.year===a}));case"MONTH":return c.filter((function(e){return e.type===t&&e.year===a&&e.month===n}));case"DAY":return c.filter((function(e){return e.type===t&&e.year===a&&e.month===n&&e.day===r}));default:return c}},m=Object(l.c)(Object(l.b)({tasks:h,UI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{year:y.getFullYear(),month:y.getMonth()+1,day:y.getDate(),prevyear:y.getFullYear(),prevmonth:y.getMonth()+1,prevday:y.getDate(),isSelected:!1,selectedId:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET":switch(t.tasktype){case"YEAR":return d({},e,{prevyear:e.year,year:e.year+t.id});case"MONTH":console.log(e.year,e.month+t.id,e.day);var a=new Date(e.year,e.month-1+t.id,e.day);return console.log(a),a=a.getMonth()+1!=e.month+t.id&&0!=a.getMonth()&&11!=a.getMonth()?new Date(e.year,e.month+t.id,0):a,d({},e,{prevyear:e.year,prevmonth:e.month,prevday:e.day,month:a.getMonth()+1,year:a.getFullYear(),day:a.getDate()});case"DAY":var n=new Date(e.year,e.month-1,e.day+t.id);return d({},e,{prevyear:e.year,prevmonth:e.month,prevday:e.day,day:n.getDate(),month:n.getMonth()+1,year:n.getFullYear()});default:return e}case"SELECT":return d({},e,{isSelected:!0,selectedId:t.id});default:return e}}}));a(44),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var p=a(6),f=a(18);a(45);function v(e,t,a){var n,r,c,o=e%360/60,i=t/100,l=a/100,s=1-Math.abs(o%2-1),u=3*l*i/(1+s),d=u*s;switch(Math.floor(o)){default:case 6:case 0:n=u,r=d,c=0;break;case 1:n=d,r=u,c=0;break;case 2:n=0,r=u,c=d;break;case 3:n=0,r=d,c=u;break;case 4:n=d,r=0,c=u;break;case 5:n=u,r=0,c=d}var h=l*(1-i);return n+=h,r+=h,c+=h,"rgb("+Math.round(255*n)+","+Math.round(255*r)+","+Math.round(255*c)+")"}function b(e){var t=20*e%360+190;return"linear-gradient(330deg, "+v(t+25,10,90)+" 0%, "+v(t,50,60)+" 100%)"}var E=function(e){var t=e.progress;return r.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",className:"ProgressBar"},r.a.createElement("defs",null,r.a.createElement("clipPath",{id:"clipPath"},r.a.createElement("rect",{x:"0.5",y:"0.5",rx:"4.8",ry:"4.8",width:"99",height:"99"}))),r.a.createElement("rect",{x:"0",y:"98.5",width:.94*t+6,height:"1",style:{stroke:"none",fill:"#ffffff","clip-path":"url(#clipPath)"}}))};function O(e){var t=e.todo,a=e.edited,c=e.selected,o=e.i,i=r.a.useRef(),l=r.a.useRef();return Object(n.useEffect)((function(){t.selected?l.current.classList.add("BoxSelected"):l.current.classList.remove("BoxSelected")}),[{todo:t}]),r.a.createElement("div",{onDoubleClick:function(){i.current.contentEditable=!0,i.current.focus(),c(!0)},onMouseDown:function(e){e.detail>1&&e.preventDefault()},onClick:function(e){e.currentTarget.getAttribute("clicked")||(console.log("click"),c()),e.currentTarget.setAttribute("clicked",!0),setTimeout((function(e){e.removeAttribute("clicked")}),500,e.currentTarget)},className:"TaskBox",style:{background:b(o)},ref:l},r.a.createElement("div",{style:{padding:"15px"}},r.a.createElement("div",{onBlur:function(e){a(e.target.innerHTML),e.target.contentEditable=!1},className:"TextBoxContents",contentEditable:!1,spellCheck:!1,ref:i},t.task)),"MONTH"===t.type||"YEAR"===t.type?r.a.createElement(E,{progress:t.progress}):"")}function k(e){var t=e.added,a=e.selected;r.a.createRef();return r.a.createElement("div",{className:"TaskBox AddBox"},r.a.createElement("div",{style:{padding:"15px",display:"table-cell",textAlign:"center",verticalAlign:"middle"}},r.a.createElement("div",{className:"AddBoxContents",onClick:function(e){e.target.className="TextBoxContents",e.target.contentEditable=!0,e.target.innerHTML="",e.currentTarget.parentElement.parentElement.className="TaskBox",e.currentTarget.parentElement.style="padding: 15px",e.currentTarget.focus(),a()},onBlur:function(e){""!==e.target.innerHTML&&t(e.target.innerHTML),e.target.className="AddBoxContents",e.target.contentEditable=!1,e.target.innerHTML="Add task",e.currentTarget.parentElement.parentElement.className="TaskBox AddBox",e.currentTarget.parentElement.style="padding: 15px; display:table-cell; text-align:center; vertical-align:middle;",e.currentTarget.focus()}},"Add task")))}var D=Object(i.b)((function(e,t){var a=t.type,n=t.id;switch(a){case"YEAR":return{todos:g(e,a,n.year)};case"MONTH":return{todos:g(e,a,n.year,n.month)};case"DAY":return{todos:g(e,a,n.year,n.month,n.day)}}}))((function(e){var t=e.todos,a=(e.children,e.dispatch),n=e.type,c=e.id;return r.a.createElement(r.a.Fragment,null,t.map((function(e,n){return r.a.createElement(O,{todo:e,i:n,edited:function(e){t[n].task=e,a({type:"EDIT_TASK",text:e,id:t[n].id})},selected:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=function(e,t){return e+t.selected};null!==e&&(t[n].selected=e),0===t.reduce(a,0)?(t.forEach((function(e){e.selected=!0})),t[n].selected=!1):!1===t[n].selected?(t.forEach((function(e){e.selected=!1})),t[n].selected=!1):(t.forEach((function(e){e.selected=!0})),t[n].selected=!1)}})})),r.a.createElement(k,{added:function(e){a({type:"ADD_TASK",text:e,tasktype:n,date:Date.now(),year:c.year,month:c.month,day:c.day})},selected:function(){t.forEach((function(e){e.selected=!1}))}}),JSON.stringify({todos:t,id:c,type:n}))})),M=a(32),w=a(22),T=a(53);a(46);function j(e){var t=e.type,a=(e.children,e.num),c=e.dispatch,o=e.items0,i=e.UI;function l(e,t){var a=[];return e.current.childNodes.forEach((function(e){a.push(e.children[0].scrollHeight+40)})),t>0?[a[0],a[1]]:[a[1],a[2]]}var s=r.a.useRef(),u=r.a.useState(o),d=Object(f.a)(u,2),h=d[0],y=d[1],g=r.a.useRef(!1),m=window.innerWidth,v=Object(w.a)(h.length,(function(e){return{from:{x:m*(e-1),scale:1,display:"block",height:"unset"}}})),b=Object(f.a)(v,2),E=b[0],O=b[1];var k=Object(M.a)((function(e){var a=e.down,n=e.first,r=e.last,o=Object(f.a)(e.movement,2),i=o[0],u=(o[1],Object(f.a)(e.direction,1)[0]),d=e.cancel;if(n&&(s.current.classList.add("noselect"),g.current=!0),r&&(g.current=!1),a&&Math.abs(i)>window.innerWidth/3)return d(),O((function(e){return{immediate:!0,x:E[e].x.value+m*(u>0?-1:1),scale:a?1.02:1,height:a&&Math.abs(i)>50?Math.max.apply(Math,Object(p.a)(l(s,i))):s.current.children[1+(u>0?-1:1)].children[0].scrollHeight+40}})),void c({type:"SET",tasktype:t,id:u>0?-1:1});O((function(e){return{x:a?i+m*(e-1):0+m*(e-1),scale:a?1.02:1,display:e<0||e>2?"none":"block",height:a&&Math.abs(i)>50?Math.max.apply(Math,Object(p.a)(l(s,i))):s.current.children[1].children[0].scrollHeight+40}}))}),{dragDelay:!0,event:{passive:!0,capture:!1}});return Object(n.useEffect)((function(){setTimeout((function(){O((function(e){return{height:s.current.children[1].children[0].scrollHeight+40}}))}),1)}),[a]),Object(n.useEffect)((function(){function e(e){switch(h[e>0?2:0]=h[1],t){case"YEAR":h[1]={id:{year:i.year},name:i.year};break;case"MONTH":h[1]={id:{year:i.year,month:i.month},name:Y(i.month,i.year)};break;case"DAY":h[1]={id:{year:i.year,month:i.month,day:i.day},name:A(new Date(i.year,i.month-1,i.day))}}y(Object(p.a)(h)),O((function(t){return{immediate:!0,x:E[t].x.value+m*(e>0?-1:1)}})),setTimeout((function(e){O((function(e){return{x:0+m*(e-1),height:s.current.children[1].children[0].scrollHeight+40}})),setTimeout((function(){y(o)}),500)}),1,e)}return y(o),console.log(t," ",g.current),i.year===i.prevyear||g.current?i.month===i.prevmonth||g.current||"MONTH"!==t&&"DAY"!==t?void 0:(console.log(t," jump month  ",i.month),void e(i.prevmonth-i.month)):(console.log(t," jump year ",i.year),void e(i.prevyear-i.year))}),[i]),r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a.div,Object.assign({},k(),{ref:s,style:{height:E[0].height}}),E.map((function(e,a){var n=e.x,c=e.scale,o=e.display,i=e.height;return r.a.createElement(T.a.div,{key:a,style:{position:"absolute",float:"left",width:"630px",x:n,scale:c,display:o,height:i}},r.a.createElement("div",null,r.a.createElement("h1",null,h[a].name,"'s ",function(){switch(t){case"YEAR":return"goals";case"MONTH":return"targets";case"DAY":return"tasks"}}()),r.a.createElement(D,{type:t,id:h[a].id})))}))))}function x(e){return e}function Y(e,t){var a=new Date(Date.now());if(a.getMonth()+1===e&&a.getFullYear()===t)return"This month";if(a.setMonth(a.getMonth()-1),a.getMonth()+1===e&&a.getFullYear()===(e-1<1?t-1:t))return"Previous month";if(a.setMonth(a.getMonth()+2),a.getMonth()+1===e&&a.getFullYear()===(e+1>12?t+1:t))return"Next month";switch(e){case 1:return"January";case 2:return"February";case 3:return"March";case 4:return"April";case 5:return"May";case 6:return"June";case 7:return"July";case 8:return"August";case 9:return"September";case 10:return"October";case 11:return"November";case 12:return"December"}}function A(e){var t=new Date(Date.now());return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()?"Today":(t.setDate(t.getDate()-1),e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()?"Yesterday":(t.setDate(t.getDate()+2),e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()?"Tomorrow":e.toLocaleDateString()))}var I=function(e,t){switch(t.type){case"YEAR":return{num:Object.keys(e.tasks).length,items0:[{id:{year:e.UI.year-1},name:x(e.UI.year-1)},{id:{year:e.UI.year},name:x(e.UI.year)},{id:{year:e.UI.year+1},name:x(e.UI.year+1)}],UI:e.UI};case"MONTH":var a=new Date(e.UI.year,e.UI.month-2,e.UI.day),n=new Date(e.UI.year,e.UI.month-1,e.UI.day),r=new Date(e.UI.year,e.UI.month,e.UI.day);return{num:Object.keys(e.tasks).length,items0:[{id:{year:a.getFullYear(),month:a.getMonth()+1},name:Y(a.getMonth()+1,a.getFullYear())},{id:{year:n.getFullYear(),month:n.getMonth()+1},name:Y(n.getMonth()+1,n.getFullYear())},{id:{year:r.getFullYear(),month:r.getMonth()+1},name:Y(r.getMonth()+1,r.getFullYear())}],UI:e.UI};case"DAY":var c=new Date(e.UI.year,e.UI.month-1,e.UI.day-1),o=new Date(e.UI.year,e.UI.month-1,e.UI.day),i=new Date(e.UI.year,e.UI.month-1,e.UI.day+1);return{num:Object.keys(e.tasks).length,items0:[{id:{year:c.getFullYear(),month:c.getMonth()+1,day:c.getDate()},name:A(c)},{id:{year:o.getFullYear(),month:o.getMonth()+1,day:o.getDate()},name:A(o)},{id:{year:i.getFullYear(),month:i.getMonth()+1,day:i.getDate()},name:A(i)}],UI:e.UI}}};o.a.render(r.a.createElement(i.a,{store:m},r.a.createElement((function(){var e=Object(i.b)(I)(j);return r.a.createElement(r.a.Fragment,null,r.a.createElement(e,{type:"YEAR"}),r.a.createElement(e,{type:"MONTH"}),r.a.createElement(e,{type:"DAY"}))}),null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[34,1,2]]]);
//# sourceMappingURL=main.48e7c1d8.chunk.js.map